{% extends "layout.html" %}
{% block title %}{{ user.username }}'s Portfolio{% endblock %}
{% block content %}
<h2>{{ user.username }}'s Portfolio</h2>
<p><strong>Course:</strong> {{ user.course or 'N/A' }}</p>
<p><strong>Bio:</strong> {{ user.bio or 'No bio provided' }}</p>
<p><a href="{{ url_for('download_portfolio', username=user.username) }}"
class="btn">Download PDF</a></p>
<hr>
<div class="project-grid">
{% for p in projects %}
<div class="project-card">
{% if p.image_file %}
<img src="{{ url_for('static', filename='uploads/' + p.image_file) }}"
width="200">
{% endif %}
<h3>{{ p.title }}</h3>
<p>{{ p.description }}</p>
</div>
{% else %}
<p>No projects yet.</p>
{% endfor %}
</div>

<!-- Modal for full-size image -->
<div id="imageModal" class="modal">
  <span class="close" onclick="closeModal()">&times;</span>
  <img class="modal-content" id="modalImg">
</div>

<script>
function openModal(imgSrc) {
  const modal = document.getElementById('imageModal');
  const modalImg = document.getElementById('modalImg');
  modalImg.src = imgSrc;
  modal.classList.add('active');
}

function closeModal() {
  const modal = document.getElementById('imageModal');
  modal.classList.remove('active');
}

document.addEventListener('click', (e) => {
  const modal = document.getElementById('imageModal');
  if (e.target === modal) {
    closeModal();
  }
});
</script>

{% endblock %}